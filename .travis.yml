sudo: false
language: node_js
node_js:
  - "12"
install:
  - npm install
  - npm i -D markdown-it
  - npm i -D minimist
before_script:
  # get release info
  export RELEASE_NAME=$TRAVIS_TAG
  export RELEASE_NOTE=$(node build/deploy/change-log.js --path=examples/docs/docs/changelog.md --version=$RELEASE_NAME)
script:
  # build resource code
  - sh build/deploy/script.sh
after_success:
  - echo $(node build/deploy/check-deploy.js)
deploy:
  provider: npm
  # â‹®
  edge: true
  skip_cleanup: true
  dry_run: true
  api_key:
    secure: fhpEh6lrNFJxXvo5Y87ZoJoR/lnqtzyUwbVoHgD4UBxtBuvGqNiu/YAB2dgFm82DTpTrygFKhsCEH1c3uBClj720mQtpLpFc6FvCBif/jy0zCQwgVWj0aXnW9zIekY4MT26G2HYiPbTylU+Keit5fufJl34mx519QmVKsxLf2K9hdS3bt6q1RcUtTocGBmPHuXuxzoBlFyFhh1bflSYl9lJioUmWRbcF8C/D07IbFbyNVeDUdqXEdhqp71z1HMHbliym/I574eVySZwVj/f0kOz80Vazg4mY7GoIDT+ULMLbBjq36GUYgja/o0VPFkcMpKLcjcZ3oWNPPuix1LmIJUICbmfpp8KWqbadEgf1ivWPADK8rTfCK2i8U4NhTedvb+fMfxiy4mo98p8wqIqIzCVp0veOajQIYyifF55Ve5v6hh7VIn2l1P0F7BG9ThNL2Nruh5IrdZAEJZZJRTq8s3g8QBUqn2gox512QYOkw+cC7/kNzq1/ix1+6f/musmLh/tfSkXSP3f+oicLdsIeVer1IEgvPPje3Hm6SLoqRjGDmHxSYmtdgkEwocx+QQ1favrABrbUmXk8wO7YUt2essR1wL5ogZey2G6RAjLyaeQ8uvHvPUwKFmaxPyQtMgiiPX9YUgT5UlKg5IG9CCMYXIdVMlxnSXbNuTSEhI0vkqs=
  on:
    condition: $(node build/deploy/check-deploy.js) = true
after_deploy:
  - sh ./build/deploy/after-deploy.sh
